<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:vm="using:Winsane.UI.ViewModels"
             xmlns:ui="using:FluentAvalonia.UI.Controls"
             mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="600"
             x:Class="Winsane.UI.Views.SystemView"
             x:DataType="vm:SystemViewModel">
    
    <ScrollViewer HorizontalScrollBarVisibility="Disabled"
                  VerticalScrollBarVisibility="Auto">
        <Grid Margin="24" ColumnSpacing="12">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            
            <StackPanel Grid.Column="0" Spacing="12">
                <ui:SettingsExpander Header="Power Control"
                                     IsExpanded="True">
                    <ui:SettingsExpander.IconSource>
                        <ui:FontIconSource Glyph="&#xE7E8;" FontFamily="Segoe Fluent Icons"/>
                    </ui:SettingsExpander.IconSource>

                    <ui:SettingsExpanderItem>
                        <ui:SettingsExpanderItem.Content>
                            <StackPanel Spacing="16" Margin="-12,4,24,4">
                                <StackPanel Spacing="12" IsVisible="{Binding !IsTimerRunning}">
                                    <TextBlock Text="Set Timer" FontWeight="SemiBold" Margin="4,0,0,0"/>
                                    
                                    <Grid ColumnDefinitions="Auto,Auto,Auto" 
                                          RowDefinitions="Auto,Auto"
                                          ColumnSpacing="12" 
                                          HorizontalAlignment="Center">
                                        
                                        <TextBlock Grid.Row="0" Grid.Column="0" Text="Hours" Opacity="0.7" FontSize="12" HorizontalAlignment="Center" Margin="0,0,0,4"/>
                                        <TextBlock Grid.Row="0" Grid.Column="1" Text="Minutes" Opacity="0.7" FontSize="12" HorizontalAlignment="Center" Margin="0,0,0,4"/>
                                        <TextBlock Grid.Row="0" Grid.Column="2" Text="Seconds" Opacity="0.7" FontSize="12" HorizontalAlignment="Center" Margin="0,0,0,4"/>

                                        <NumericUpDown Grid.Row="1" Grid.Column="0" Value="{Binding Hours}" Minimum="0" FormatString="0" Width="110" HorizontalContentAlignment="Center"/>
                                        <NumericUpDown Grid.Row="1" Grid.Column="1" Value="{Binding Minutes}" Minimum="0" Maximum="59" FormatString="0" Width="110" HorizontalContentAlignment="Center"/>
                                        <NumericUpDown Grid.Row="1" Grid.Column="2" Value="{Binding Seconds}" Minimum="0" Maximum="59" FormatString="0" Width="110" HorizontalContentAlignment="Center"/>
                                    </Grid>
                                </StackPanel>

                                <StackPanel Spacing="12" IsVisible="{Binding IsTimerRunning}">
                                    <TextBlock Text="Action executing in:" FontWeight="SemiBold" HorizontalAlignment="Center"/>
                                    <Viewbox Height="48">
                                        <TextBlock Text="{Binding RemainingTimeMessage}" 
                                                   FontWeight="Light" 
                                                   Foreground="{DynamicResource AccentTextFillColorPrimaryBrush}"/>
                                    </Viewbox>
                                    <ProgressBar IsIndeterminate="True" HorizontalAlignment="Stretch"/>
                                    
                                    <Button Command="{Binding CancelCommand}" 
                                            HorizontalAlignment="Stretch"
                                            Classes="danger">
                                        <StackPanel Orientation="Horizontal" Spacing="8" HorizontalAlignment="Center">
                                            <ui:SymbolIcon Symbol="Cancel" FontSize="16"/>
                                            <TextBlock Text="Cancel Action"/>
                                        </StackPanel>
                                    </Button>
                                </StackPanel>
                            </StackPanel>
                        </ui:SettingsExpanderItem.Content>
                    </ui:SettingsExpanderItem>

                    <ui:SettingsExpanderItem>
                        <ui:SettingsExpanderItem.Content>
                            <StackPanel Spacing="16" Margin="-12,4,24,4">
                                <TextBlock Text="Actions" FontWeight="SemiBold" Margin="4,0,0,0"/>
                                
                                <Grid ColumnDefinitions="*,*" RowDefinitions="Auto,Auto,Auto" RowSpacing="12" ColumnSpacing="12">
                                    <Button Grid.Row="0" Grid.Column="0" Command="{Binding ShutdownCommand}" Classes="accent" HorizontalAlignment="Stretch" Height="70">
                                        <StackPanel Spacing="4">
                                            <ui:SymbolIcon Symbol="Stop" FontSize="20"/>
                                            <TextBlock Text="Shutdown" FontSize="11"/>
                                        </StackPanel>
                                    </Button>
                                    
                                    <Button Grid.Row="0" Grid.Column="1" Command="{Binding RestartCommand}" HorizontalAlignment="Stretch" Height="70">
                                        <StackPanel Spacing="4">
                                            <ui:SymbolIcon Symbol="Sync" FontSize="20"/>
                                            <TextBlock Text="Restart" FontSize="11"/>
                                        </StackPanel>
                                    </Button>
                                    
                                    <Button Grid.Row="1" Grid.Column="0" Command="{Binding SleepCommand}" HorizontalAlignment="Stretch" Height="70">
                                        <StackPanel Spacing="4">
                                            <ui:SymbolIcon Symbol="WeatherHailNight" FontSize="20"/>
                                            <TextBlock Text="Sleep" FontSize="11"/>
                                        </StackPanel>
                                    </Button>

                                    <Button Grid.Row="1" Grid.Column="1" Command="{Binding HibernateCommand}" HorizontalAlignment="Stretch" Height="70">
                                        <StackPanel Spacing="4">
                                            <ui:SymbolIcon Symbol="Save" FontSize="20"/>
                                            <TextBlock Text="Hibernate" FontSize="11"/>
                                        </StackPanel>
                                    </Button>

                                    <Button Grid.Row="2" Grid.Column="0" Grid.ColumnSpan="2" Command="{Binding BiosCommand}" HorizontalAlignment="Stretch" Height="40">
                                        <StackPanel Orientation="Horizontal" Spacing="8">
                                            <ui:SymbolIcon Symbol="Settings" FontSize="16"/>
                                            <TextBlock Text="Restart to BIOS" FontSize="11"/>
                                        </StackPanel>
                                    </Button>
                                </Grid>
                            </StackPanel>
                        </ui:SettingsExpanderItem.Content>
                    </ui:SettingsExpanderItem>
                </ui:SettingsExpander>
            </StackPanel>

            <StackPanel Grid.Column="1" Spacing="12">
                <ui:SettingsExpander Header="Motherboard"
                                     IsExpanded="True">
                    <ui:SettingsExpander.IconSource>
                        <ui:SymbolIconSource Symbol="Settings"/>
                    </ui:SettingsExpander.IconSource>
                    <ui:SettingsExpanderItem Content="{Binding MotherboardName}"
                                             Description="Name"/>
                    <ui:SettingsExpanderItem Content="{Binding BiosVersion}"
                                             Description="BIOS Version"/>
                </ui:SettingsExpander>
                
                <ui:SettingsExpander Header="Processor (CPU)"
                                     IsExpanded="True">
                    <ui:SettingsExpander.IconSource>
                        <ui:SymbolIconSource Symbol="Settings"/>
                    </ui:SettingsExpander.IconSource>
                    <ui:SettingsExpanderItem Content="{Binding CpuName}"
                                             Description="Name"/>
                    <ui:SettingsExpanderItem Content="{Binding CpuCores}"
                                             Description="Topology"/>
                    <ui:SettingsExpanderItem Content="{Binding CpuUsage}"
                                             Description="Usage"/>
                </ui:SettingsExpander>

                <ui:SettingsExpander Header="Memory (RAM)"
                                     IsExpanded="True">
                    <ui:SettingsExpander.IconSource>
                        <ui:SymbolIconSource Symbol="Settings"/>
                    </ui:SettingsExpander.IconSource>
                    <ui:SettingsExpanderItem Content="{Binding RamSpeed}"
                                             Description="Speed"/>
                    <ui:SettingsExpanderItem Content="{Binding RamUsage}"
                                             Description="Usage"/>
                </ui:SettingsExpander>
                
                <ui:SettingsExpander Header="Graphics (GPU)"
                                     IsExpanded="True">
                    <ui:SettingsExpander.IconSource>
                        <ui:SymbolIconSource Symbol="Image"/>
                    </ui:SettingsExpander.IconSource>
                    <ui:SettingsExpanderItem Content="{Binding GpuName}"
                                             Description="Name"/>
                    <ui:SettingsExpanderItem Description="VRAM Usage"
                                             Content="{Binding GpuVramUsage}"/>
                    <ui:SettingsExpanderItem Description="3D Load"
                                             Content="{Binding Gpu3DLoad}"/>
                </ui:SettingsExpander>
            </StackPanel>

            <StackPanel Grid.Column="2" Spacing="12">
                <ui:SettingsExpander Header="Operating System"
                                     IsExpanded="True">
                    <ui:SettingsExpander.IconSource>
                        <ui:SymbolIconSource Symbol="Globe"/>
                    </ui:SettingsExpander.IconSource>
                    <ui:SettingsExpanderItem Description="Edition">
                        <ui:SettingsExpanderItem.Content>
                            <StackPanel Orientation="Horizontal" Spacing="8">
                                <TextBlock Text="{Binding OsCaption}" VerticalAlignment="Center"/>
                                <TextBlock Text="•" Opacity="0.5" VerticalAlignment="Center"/>
                                <TextBlock Text="{Binding OsArch}" Opacity="0.7" VerticalAlignment="Center"/>
                            </StackPanel>
                        </ui:SettingsExpanderItem.Content>
                    </ui:SettingsExpanderItem>
                    <ui:SettingsExpanderItem Description="Version">
                        <ui:SettingsExpanderItem.Content>
                            <StackPanel Orientation="Horizontal" Spacing="8">
                                <TextBlock Text="{Binding DisplayVersion}" VerticalAlignment="Center"/>
                                <TextBlock Text="•" Opacity="0.5" VerticalAlignment="Center"/>
                                <TextBlock Text="{Binding OsVersion}" Opacity="0.7" VerticalAlignment="Center"/>
                            </StackPanel>
                        </ui:SettingsExpanderItem.Content>
                    </ui:SettingsExpanderItem>
                    <ui:SettingsExpanderItem Description="Last Boot">
                        <ui:SettingsExpanderItem.Content>
                            <StackPanel Orientation="Horizontal" Spacing="8">
                                <TextBlock Text="{Binding BootTime}" VerticalAlignment="Center"/>
                                <TextBlock Text="•" Opacity="0.5" VerticalAlignment="Center"/>
                                <TextBlock Text="{Binding Uptime}" Opacity="0.7" VerticalAlignment="Center"/>
                            </StackPanel>
                        </ui:SettingsExpanderItem.Content>
                    </ui:SettingsExpanderItem>

                    <ui:SettingsExpanderItem Content="{Binding Hostname}"
                                             Description="Hostname"/>
                    <ui:SettingsExpanderItem Content="{Binding Username}"
                                             Description="Current User"/>
                </ui:SettingsExpander>
                
                <ui:SettingsExpander Header="Security"
                                     IsExpanded="True">
                    <ui:SettingsExpander.IconSource>
                        <ui:SymbolIconSource Symbol="Permissions"/>
                    </ui:SettingsExpander.IconSource>
                    <ui:SettingsExpanderItem Content="{Binding SecureBootStatus}"
                                             Description="Secure Boot"/>
                    <ui:SettingsExpanderItem Content="{Binding TpmStatus}"
                                             Description="TPM"/>
                    <ui:SettingsExpanderItem Content="{Binding HyperVStatus}"
                                             Description="Hyper-V"/>
                    <ui:SettingsExpanderItem Content="{Binding AntivirusStatus}"
                                             Description="Antivirus"/>
                    <ui:SettingsExpanderItem Content="{Binding UacStatus}"
                                             Description="UAC"/>
                    <ui:SettingsExpanderItem Content="{Binding DeveloperModeStatus}"
                                             Description="Developer Mode"/>
                    <ui:SettingsExpanderItem Content="{Binding BitLockerStatus}"
                                             Description="BitLocker"/>
                </ui:SettingsExpander>
            </StackPanel>
            
        </Grid>
    </ScrollViewer>
</UserControl>